<section id="skills" class="skills-section">
  <div class="skills-header">
    <h2 class="skills-title animate__animated animate__fadeInDown">Tech Expertise</h2>
    <p class="skills-subtitle animate__animated animate__fadeInUp">Advanced technologies and frameworks powering innovation</p>
  </div>
  
  <div class="skills-container">
    <!-- Skills Grid with Direct Loop -->
    <div class="skills-grid">
      <div *ngFor="let skill of skills; let i = index" 
           class="skill-card-wrapper animate__animated animate__fadeInUp"
           [style.animation-delay]="(i * 0.1) + 's'">
        
        <p-card 
          class="futuristic-skill-card"
          [style.--category-color]="getCategoryColor(skill.category)"
          [attr.data-category]="skill.category"
          (mouseenter)="onSkillHover(skill)"
          (click)="onSkillClick(skill)">
          
          <!-- Card Header -->
          <ng-template pTemplate="header">
            <div class="card-header">
              <div class="skill-status">
                <div class="status-dot"></div>
                <span class="status-text">Active</span>
              </div>
              <p-badge 
                [value]="skill.category" 
                class="skill-category-badge">
              </p-badge>
            </div>
          </ng-template>
          
          <!-- Card Content -->
          <div class="skill-visual">
            <div class="skill-icon-container">
              <img [src]="skill.image" [alt]="skill.name + ' logo'" class="skill-icon">
              <div class="icon-glow"></div>
            </div>
            
            <!-- Proficiency Ring -->
            <div class="proficiency-ring">
              <svg class="ring-svg" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" class="ring-background"></circle>
                <circle 
                  cx="50" 
                  cy="50" 
                  r="45" 
                  class="ring-progress"
                  [style.stroke-dasharray]="'283'"
                  [style.stroke-dashoffset]="283 - (283 * skill.level / 5)">
                </circle>
              </svg>
              <div class="proficiency-text">
                <span class="level">{{ skill.level }}</span>
                <span class="max">/5</span>
              </div>
            </div>
          </div>
          
          <!-- Skill Info -->
          <div class="skill-info">
            <h3 class="skill-name">{{ skill.name }}</h3>
            <p class="skill-description">{{ skill.description }}</p>
            
            <!-- Skill Metrics -->
            <div class="skill-metrics">
              <div class="metric-item">
                <div class="metric-label">Proficiency</div>
                <div class="metric-value">{{ getProficiencyLevel(skill.level) }}</div>
              </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="progress-container">
              <div class="progress-label">
                <span>Mastery Level</span>
                <span>{{ (skill.level * 20) }}%</span>
              </div>
              <div class="progress-bar">
                <div 
                  class="progress-fill" 
                  [style.width]="(skill.level * 20) + '%'">
                </div>
              </div>
            </div>
          </div>
          
          <!-- Floating Elements -->
          <div class="floating-elements">
            <div class="floating-dot" *ngFor="let dot of [1,2,3]"></div>
          </div>
          
          <!-- Card Glow -->
          <div class="card-glow"></div>
        </p-card>
      </div>
    </div>
  </div>

  <!-- Skills Analytics Panel with PrimeNG Panel -->
  <p-panel 
    class="analytics-dashboard animate__animated animate__fadeInUp" 
    [style.animation-delay]="(skills.length * 0.1 + 0.3) + 's'"
    [toggleable]="false">
    
    <ng-template pTemplate="header">
      <div class="dashboard-header">
        <h3 class="dashboard-title">Skills Analytics</h3>
        <div class="live-indicator">
          <div class="pulse-dot"></div>
          <span>Real-time Data</span>
        </div>
      </div>
    </ng-template>
    
    <div class="analytics-grid">
      <!-- Overall Stats -->
      <p-card class="stat-panel">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ skills.length }}</div>
          <div class="stat-label">Technologies</div>
        </div>
      </p-card>
      
      <p-card class="stat-panel">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ getAverageSkillLevel() }}</div>
          <div class="stat-label">Avg. Level</div>
        </div>
      </p-card>
      
      <p-card class="stat-panel">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3V21H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7 16L12 11L16 15L21 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ getExpertSkillsCount() }}</div>
          <div class="stat-label">Expert Level</div>
        </div>
      </p-card>
      
      <p-card class="stat-panel">
        <div class="stat-icon">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 12C21 16.97 16.97 21 12 21S3 16.97 3 12S7.03 3 12 3S21 7.03 21 12Z" stroke="currentColor" stroke-width="2"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-number">95%</div>
          <div class="stat-label">Success Rate</div>
        </div>
      </p-card>
    </div>
    
    <!-- Category Breakdown -->
    <div class="category-breakdown">
      <h4 class="breakdown-title">Skills by Category</h4>
      <div class="category-grid">
        <div class="category-item" *ngFor="let category of getUniqueCategories()">
          <div class="category-color" [style.background]="getCategoryColor(category)"></div>
          <span class="category-name">{{ category }}</span>
          <p-badge [value]="getSkillsInCategory(category)" class="category-count"></p-badge>
        </div>
      </div>
    </div>
  </p-panel>

  <!-- Skill Detail Modal with PrimeNG Dialog -->
  <p-dialog 
    [(visible)]="isModalOpen" 
    [modal]="true"
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    styleClass="skill-detail-dialog"
    *ngIf="selectedSkill">
    
    <ng-template pTemplate="header">
      <div class="dialog-header">
        <div class="skill-icon-small">
          <img [src]="selectedSkill.image" [alt]="selectedSkill.name">
        </div>
        <h3>{{ selectedSkill.name }}</h3>
      </div>
    </ng-template>
    
    <div class="dialog-content">
      <div class="skill-details">
        <div class="detail-section">
          <h4>Proficiency Level</h4>
          <div class="proficiency-display">
            <div class="proficiency-level">{{ getProficiencyLevel(selectedSkill.level) }}</div>
            <div class="proficiency-bar">
              <div class="bar-fill" [style.width]="(selectedSkill.level * 20) + '%'"></div>
            </div>
            <div class="proficiency-percentage">{{ (selectedSkill.level * 20) }}%</div>
          </div>
        </div>
        
        <div class="detail-section">
          <h4>Category</h4>
          <p-badge [value]="selectedSkill.category" class="category-badge-large"></p-badge>
        </div>
        
        <div class="detail-section">
          <h4>Description</h4>
          <p>{{ selectedSkill.description }}</p>
        </div>
      </div>
    </div>
    
    <ng-template pTemplate="footer">
      <p-button 
        label="Close" 
        (click)="isModalOpen = false"
        class="close-button">
      </p-button>
    </ng-template>
  </p-dialog>
</section>
